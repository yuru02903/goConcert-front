import{T as B,r as s,X as P,Y as w,Z as l,c as t,af as x,ag as A,V as f,_ as L,a9 as S,ab as T}from"./index-ee21c5dd.js";import{V as k}from"./VRow-c2407045.js";import{V as D}from"./VDivider-2483a20b.js";import{V as v}from"./VCol-1ff7b675.js";import{V as F,a as I}from"./VList-8c1de52e.js";import{V as U}from"./VDataTableServer-e7e46bf6.js";import"./VPagination-153f99fd.js";import"./VSelect-0eea4c94.js";import"./VSlideGroup-8bc9ab4b.js";const K=S("h1",null,"票券管理",-1),q={__name:"TicketsView",setup(N){const{apiAuth:V}=T(),h=B(),m=s(10),i=s([{key:"createdAt",order:"desc"}]),c=s(1),p=s([]),C=[{title:"賣家",align:"center",sortable:!0,key:"seller.account"},{title:"名稱",align:"center",sortable:!0,key:"name"},{title:"表演者",align:"center",sortable:!0,key:"performer"},{title:"原價",align:"center",sortable:!0,key:"originalPrice"},{title:"售價",align:"center",sortable:!0,key:"price"},{title:"國籍",align:"center",sortable:!0,key:"categoryCountry"},{title:"查看",align:"center",sortable:!1,key:"eye"},{title:"禁售",align:"center",sortable:!1,key:"cancel"}],g=s(!0),y=s(0),u=s(""),r=async()=>{var n,a,e,d;g.value=!0;try{const{data:o}=await V.get("/tickets/all",{params:{page:c.value,itemsPerPage:m.value,sortBy:((n=i.value[0])==null?void 0:n.key)||"createdAt",sortOrder:((a=i.value[0])==null?void 0:a.order)==="asc"?1:-1,search:u.value}});p.value.splice(0,p.value.length,...o.result.data),y.value=o.result.total}catch(o){console.log(o);const _=((d=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:d.message)||"發生錯誤，請稍後再試";h({text:_,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}g.value=!1};r();const b=()=>{c.value=1,r()};return(n,a)=>(P(),w(k,{class:"py-8 px-4 ma-0"},{default:l(()=>[t(v,{cols:"12",class:""},{default:l(()=>[K,t(D)]),_:1}),t(L,{class:"mx-auto",width:"80%",style:{"background-color":"#FFFBE6"}},{default:l(()=>[t(F,null,{default:l(()=>[t(I,null,{default:l(()=>[t(k,null,{default:l(()=>[t(v,{cols:"12"},{default:l(()=>[t(x,{label:"搜尋","append-icon":"mdi-magnify",modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),"onClick:append":b,onKeydown:A(b,["enter"])},null,8,["modelValue"])]),_:1}),t(v,{cols:"12"},{default:l(()=>[t(U,{"items-per-page":m.value,"onUpdate:itemsPerPage":[a[1]||(a[1]=e=>m.value=e),r],"sort-by":i.value,"onUpdate:sortBy":[a[2]||(a[2]=e=>i.value=e),r],page:c.value,"onUpdate:page":[a[3]||(a[3]=e=>c.value=e),r],items:p.value,headers:C,loading:g.value,"items-length":y.value,search:u.value,hover:""},{"item.eye":l(({item:e})=>[t(f,{icon:"mdi-eye",variant:"text",color:"grey",onClick:d=>n.openDialog(e)},null,8,["onClick"])]),"item.cancel":l(({item:e})=>[t(f,{icon:"mdi-close",variant:"text",color:"red",onClick:d=>n.openDialog(e)},null,8,["onClick"])]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length","search"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{q as default};
