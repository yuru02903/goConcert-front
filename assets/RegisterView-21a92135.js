import{ak as X,T as H,S as J,U as Q,l as ee,R as re,W as ae,X as z,Y as ie,Z as O,ab as te,c as _,ag as D,a4 as s,V as ne,a1 as G,aj as se,$ as oe,a6 as le,a9 as ue}from"./index-46689435.js";import{v as de}from"./index-96829827.js";import{u as ce,a as $}from"./vee-validate.esm-d9cd9679.js";import{c as me,a as k,b as fe,V as ve}from"./index.esm-8bfc577f.js";import{V as ge}from"./VContainer-8b94f697.js";var K={exports:{}};(function(q,B){(function(R,p){q.exports=p()})(X,function(){return function(){var E={607:function(l,o,f){var v,V,N,A=this&&this.__spreadArray||function(C,e,I){if(I||arguments.length===2)for(var i=0,t=e.length,u;i<t;i++)(u||!(i in e))&&(u||(u=Array.prototype.slice.call(e,0,i)),u[i]=e[i]);return C.concat(u||Array.prototype.slice.call(e))};(function(C){if(typeof l.exports=="object"){var e=C(f(875),o);e!==void 0&&(l.exports=e)}else V=[f,o],v=C,N=typeof v=="function"?v.apply(o,V):v,N!==void 0&&(l.exports=N)})(function(C,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isCreditCard=e.isDonateCode=e.isCellPhoneBarcode=e.isCDC=e.isOriginalRC=e.isNewRC=e.isRC=e.isNI=e.isGUI=e.isCreditCardNumberValid=e.isEInvoiceDonateCodeValid=e.isEInvoiceCellPhoneBarcodeValid=e.isCitizenDigitalCertificateNumberValid=e.isOriginalResidentCertificateNumberValid=e.isNewResidentCertificateNumberValid=e.isResidentCertificateNumberValid=e.isNationalIdentificationNumberValid=e.isGuiNumberValid=void 0;function I(r,a,d){for(var b=Math.min(r.length,a.length),g=[],m=0;m<b;m++)g[m]=d(r[m],a[m]);return g}function i(r,a){return r+a}function t(r,a){return r*a}function u(r,a){if(a===void 0&&(a=!1),typeof r!="string"&&typeof r!="number")return!1;var d=[1,2,1,2,1,2,4,1],b=r.toString(),g=/^\d{8}$/;if(!g.test(b))return!1;var m=10,h=I(d,b.split("").map(function(c){return parseInt(c,m)}),t).map(function(c){return c%10+Math.floor(c/10)}).reduce(i,0),y=a?5:10;return h%y===0||parseInt(b.charAt(6),m)===7&&(h+1)%y===0}e.isGuiNumberValid=u;function n(r){if(typeof r!="string")return!1;var a=/^[A-Z][1,2]\d{8}$/;return a.test(r)&&F(r)}e.isNationalIdentificationNumberValid=n;function S(r){return typeof r!="string"?!1:U(r)||T(r)}e.isResidentCertificateNumberValid=S;function U(r){if(typeof r!="string")return!1;var a=/^[A-Z][8,9]\d{8}$/;return a.test(r)&&F(r)}e.isNewResidentCertificateNumberValid=U;function T(r){if(typeof r!="string")return!1;var a=/^[A-Z]{2}\d{8}$/;return a.test(r)&&F(r)}e.isOriginalResidentCertificateNumberValid=T;function L(r){if(typeof r!="string")return!1;var a=r.toString(),d=/^[A-Z]{2}\d{14}$/;return d.test(a)}e.isCitizenDigitalCertificateNumberValid=L;function W(r){if(typeof r!="string")return!1;var a=r.toString(),d=/^\/[\dA-Z.\-+]{7}$/;return d.test(a)}e.isEInvoiceCellPhoneBarcodeValid=W;function Z(r){if(typeof r!="string"&&typeof r!="number")return!1;var a=r.toString(),d=/^[\d]{3,7}$/;return d.test(a)}e.isEInvoiceDonateCodeValid=Z;function j(r,a){if(a===void 0&&(a={}),typeof r!="string")return!1;var d=/^[0-9]{12,19}$/;if(!d.test(r))return!1;var b=[/^3[47][0-9]{13}$/,/^(6541|6556)[0-9]{12}$/,/^389[0-9]{11}$/,/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,/^65[4-9][0-9]{13}|64[4-9][0-9]{13}|6011[0-9]{12}|(622(?:12[6-9]|1[3-9][0-9]|[2-8][0-9][0-9]|9[01][0-9]|92[0-5])[0-9]{10})$/,/^63[7-9][0-9]{13}$/,/^(?:2131|1800|35\d{3})\d{11}$/,/^9[0-9]{15}$/,/^(6304|6706|6709|6771)[0-9]{12,15}$/,/^(5018|5020|5038|6304|6759|6761|6763)[0-9]{8,15}$/,/^(5[1-5][0-9]{14}|2(22[1-9][0-9]{12}|2[3-9][0-9]{13}|[3-6][0-9]{14}|7[0-1][0-9]{13}|720[0-9]{12}))$/,/^(6334|6767)[0-9]{12}|(6334|6767)[0-9]{14}|(6334|6767)[0-9]{15}$/,/^(4903|4905|4911|4936|6333|6759)[0-9]{12}|(4903|4905|4911|4936|6333|6759)[0-9]{14}|(4903|4905|4911|4936|6333|6759)[0-9]{15}|564182[0-9]{10}|564182[0-9]{12}|564182[0-9]{13}|633110[0-9]{10}|633110[0-9]{12}|633110[0-9]{13}$/,/^(62[0-9]{14,17})$/,/^4[0-9]{12}(?:[0-9]{3})?$/,/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/],g=a.checkIssuerRegexes,m=g===void 0?!1:g;if(m&&!b.some(function(c){return c.test(r)}))return!1;var h=r.split("").map(function(c){return parseInt(c,10)}),y=h.reverse().reduce(function(c,w,P){return P%2===0?c+w:c+(w*2>9?w*2-9:w*2)},0);return y%10===0}e.isCreditCardNumberValid=j;function F(r){var a=10,d=[1,10,19,28,37,46,55,64,39,73,82,2,11,20,48,29,38,47,56,65,74,83,21,3,12,30],b=[0,1,2,3,4,5,6,7,4,8,9,0,1,2,5,3,4,5,6,7,8,9,2,0,1,3],g=function(x,Y){return x.charCodeAt(Y)-"A".charCodeAt(0)},m=d[g(r,0)],h=isNaN(parseInt(r[1],a))?b[g(r,1)]:parseInt(r[1],a),y=r.substring(2).split("").map(function(x){return parseInt(x,a)}),c=A([m,h],y,!0),w=[1,8,7,6,5,4,3,2,1,1],P=I(c,w,t).reduce(i,0);return P%10===0}e.isGUI=u,e.isNI=n,e.isRC=S,e.isNewRC=U,e.isOriginalRC=T,e.isCDC=L,e.isCellPhoneBarcode=W,e.isDonateCode=Z,e.isCreditCard=j})},875:function(l){function o(f){var v=new Error("Cannot find module '"+f+"'");throw v.code="MODULE_NOT_FOUND",v}o.keys=function(){return[]},o.resolve=o,o.id=875,l.exports=o}},R={};function p(l){var o=R[l];if(o!==void 0)return o.exports;var f=R[l]={exports:{}};return E[l].call(f.exports,f,f.exports,p),f.exports}(function(){p.o=function(l,o){return Object.prototype.hasOwnProperty.call(l,o)}})();var M=p(607);return M}()})})(K);var Ce=K.exports;const be=ue("h1",{class:"text-mainColor"}," 註冊 ",-1),_e={key:0,class:"pt-4",style:{color:"gray"}},ye={__name:"RegisterView",setup(q){const{api:B}=te(),E=H(),R=J(),{smAndDown:p}=Q(),M=ee(()=>p.value),l=me({account:k().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),nationalIdNumber:k().required("身分證號為必填欄位").test("isNationalIdNumber","身分證號格式有誤",i=>Ce.isNationalIdentificationNumberValid(i)),email:k().required("信箱為必填欄位").test("isEmail","信箱格式有誤",i=>de.isEmail(i)),password:k().required("密碼為必填欄位").min(8,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:k().required("密碼為必填欄位").min(8,"密碼長度不符").max(20,"密碼長度不符").oneOf([fe("password")],"密碼不一致")}),{handleSubmit:o,isSubmitting:f}=ce({validationSchema:l}),v=$("account"),V=$("nationalIdNumber"),N=$("email"),A=$("password"),C=$("passwordConfirm"),e=re(),I=o(async i=>{var t,u;try{await B.post("/users",{account:i.account,nationalIdNumber:i.nationalIdNumber,email:i.email,password:i.password});const{data:n}=await B.post("/users/login",{email:i.email,password:i.password});e.login(n.result),E({text:"註冊成功，已登入",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"top"}}),R.push("/")}catch(n){const S=((u=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:u.message)||"發生錯誤，請稍後再試";E({text:S,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"top"}})}});return(i,t)=>{const u=ae("router-link");return z(),ie(ge,{class:"px-md-8 py-md-12 px-8 py-6"},{default:O(()=>[be,_(ve,{disabled:s(f),onSubmit:se(s(I),["prevent"])},{default:O(()=>[_(D,{class:"mb-sm-0 mb-md-2",label:"帳號",minlength:"4",maxlength:"20",counter:"",hint:"請輸入4 ~ 20個英數字，區分大小寫",variant:"underlined","prepend-icon":"mdi-account-circle-outline",modelValue:s(v).value.value,"onUpdate:modelValue":t[0]||(t[0]=n=>s(v).value.value=n),"error-messages":s(v).errorMessage.value},null,8,["modelValue","error-messages"]),_(D,{class:"mb-sm-0 mb-md-2",label:"身分證",minlength:"10",maxlength:"10",counter:"",type:"password",variant:"underlined","prepend-icon":"mdi-card-account-details-outline",modelValue:s(V).value.value,"onUpdate:modelValue":t[1]||(t[1]=n=>s(V).value.value=n),"error-messages":s(V).errorMessage.value},null,8,["modelValue","error-messages"]),_(D,{class:"mb-2",label:"電子信箱",type:"email",variant:"underlined","prepend-icon":"mdi-email-outline",modelValue:s(N).value.value,"onUpdate:modelValue":t[2]||(t[2]=n=>s(N).value.value=n),"error-messages":s(N).errorMessage.value},null,8,["modelValue","error-messages"]),_(D,{class:"mb-2",label:"密碼",minlength:"8",maxlength:"20",counter:"",hint:"請輸入8 ~ 20個英數字，區分大小寫",type:"password",variant:"underlined","prepend-icon":"mdi-lock-outline",modelValue:s(A).value.value,"onUpdate:modelValue":t[3]||(t[3]=n=>s(A).value.value=n),"error-messages":s(A).errorMessage.value},null,8,["modelValue","error-messages"]),_(D,{class:"mb-2",label:"確認密碼",minlength:"8",maxlength:"20",counter:"",type:"password",variant:"underlined","prepend-icon":"mdi-lock",modelValue:s(C).value.value,"onUpdate:modelValue":t[4]||(t[4]=n=>s(C).value.value=n),"error-messages":s(C).errorMessage.value},null,8,["modelValue","error-messages"]),_(ne,{type:"submit",color:"mainColor",width:"100%"},{default:O(()=>[G("註冊")]),_:1})]),_:1},8,["disabled","onSubmit"]),M.value?(z(),oe("h5",_e,[G("已經註冊? 前往 "),_(u,{to:"/login",class:"text-mainColor"},{default:O(()=>[G("登入")]),_:1})])):le("",!0)]),_:1})}}};export{ye as default};
