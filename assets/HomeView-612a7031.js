import{T as D,r as u,X as F,$ as T,c as e,Z as s,a8 as A,F as I,_ as w,ag as n,aC as M,V as p,aj as L,a3 as N,a1 as c,aa as $,an as h,a0 as E,a2 as H,a9 as K,ab as j}from"./index-46689435.js";import{V as O}from"./index.esm-8bfc577f.js";import{V as y,a as o}from"./VRow-2af9a2ca.js";import{V as R}from"./VDivider-db64a855.js";import{V as X,a as Z}from"./VList-4dbbf919.js";import{V as q}from"./VDataTableServer-fafca0a8.js";import"./VSelect-822f58d7.js";import"./VSlideGroup-6f54e783.js";const z=K("h1",null,"會員管理",-1),le={__name:"HomeView",setup(G){const{apiAuth:S}=j(),U=D(),b=u(10),i=u([{key:"createdAt",order:"desc"}]),m=u(1),V=u([]),B=[{title:"帳號",align:"center",sortable:!0,key:"account"},{title:"身分證",align:"center",sortable:!0,key:"nationalIdNumber"},{title:"email",align:"center",sortable:!0,key:"email"},{title:"查看",align:"center",sortable:!1,key:"eye"},{title:"禁用",align:"center",sortable:!1,key:"cancel"}],f=u(!0),k=u(0),g=u(""),d=async()=>{var a,t,l,v;f.value=!0;try{const{data:r}=await S.get("/users",{params:{page:m.value,itemsPerPage:b.value,sortBy:((a=i.value[0])==null?void 0:a.key)||"createdAt",sortOrder:((t=i.value[0])==null?void 0:t.order)==="asc"?1:-1,search:g.value}});V.value.splice(0,V.value.length,...r.result.data),k.value=r.result.total}catch(r){console.log(r);const P=((v=(l=r==null?void 0:r.response)==null?void 0:l.data)==null?void 0:v.message)||"發生錯誤，請稍後再試";U({text:P,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}f.value=!1};d();const C=()=>{m.value=1,d()};return(a,t)=>(F(),T(I,null,[e(y,{class:"py-8 px-4 ma-0"},{default:s(()=>[e(o,{cols:"12",class:""},{default:s(()=>[z,e(R)]),_:1}),e(w,{class:"mx-auto",width:"80%",style:{"background-color":"#FFFBE6"}},{default:s(()=>[e(X,null,{default:s(()=>[e(Z,null,{default:s(()=>[e(y,null,{default:s(()=>[e(o,{cols:"12"},{default:s(()=>[e(n,{label:"搜尋","append-icon":"mdi-magnify",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=l=>g.value=l),"onClick:append":C,onKeydown:M(C,["enter"])},null,8,["modelValue"])]),_:1}),e(o,{cols:"12"},{default:s(()=>[e(q,{"items-per-page":b.value,"onUpdate:itemsPerPage":[t[1]||(t[1]=l=>b.value=l),d],"sort-by":i.value,"onUpdate:sortBy":[t[2]||(t[2]=l=>i.value=l),d],page:m.value,"onUpdate:page":[t[3]||(t[3]=l=>m.value=l),d],items:V.value,headers:B,loading:f.value,"items-length":k.value,search:g.value,hover:""},{"item.eye":s(({item:l})=>[e(p,{icon:"mdi-eye",variant:"text",color:"grey",onClick:v=>a.openDialog(l)},null,8,["onClick"])]),"item.cancel":s(({item:l})=>[e(p,{icon:"mdi-close",variant:"text",color:"red",onClick:v=>a.openDialog(l)},null,8,["onClick"])]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length","search"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{modelValue:a.dialog,"onUpdate:modelValue":t[9]||(t[9]=l=>a.dialog=l),width:"500px"},{default:s(()=>[e(O,{disabled:a.isSubmitting,onSubmit:L(a.submit,["prevent"])},{default:s(()=>[e(w,null,{default:s(()=>[e(N,null,{default:s(()=>[c($(a.dialogId===""?"新增座位":"編輯座位"),1)]),_:1}),e(h,null,{default:s(()=>[e(y,null,{default:s(()=>[e(o,{cols:"12"},{default:s(()=>[e(n,{label:"場館名稱",clearable:"",modelValue:a.venue.value.value,"onUpdate:modelValue":t[4]||(t[4]=l=>a.venue.value.value=l),"error-messages":a.venue.errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12"},{default:s(()=>[e(n,{label:"區域",clearable:"",modelValue:a.area.value.value,"onUpdate:modelValue":t[5]||(t[5]=l=>a.area.value.value=l),"error-messages":a.area.errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"12"},{default:s(()=>[e(n,{label:"排數",clearable:"",modelValue:a.row.value.value,"onUpdate:modelValue":t[6]||(t[6]=l=>a.row.value.value=l),"error-messages":a.row.errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"6"},{default:s(()=>[e(n,{label:"開始座號",clearable:"",modelValue:a.seat1.value.value,"onUpdate:modelValue":t[7]||(t[7]=l=>a.seat1.value.value=l),"error-messages":a.seat1.errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(o,{cols:"6"},{default:s(()=>[e(n,{label:"結束座號",clearable:"",modelValue:a.seat2.value.value,"onUpdate:modelValue":t[8]||(t[8]=l=>a.seat2.value.value=l),"error-messages":a.seat2.errorMessage.value},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1}),e(E,null,{default:s(()=>[e(H),e(p,{color:"red",disabled:a.isSubmitting,onClick:a.closeDialog},{default:s(()=>[c("取消")]),_:1},8,["disabled","onClick"]),e(p,{color:"green",type:"submit",loading:a.isSubmitting},{default:s(()=>[c("送出")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue"])],64))}};export{le as default};
